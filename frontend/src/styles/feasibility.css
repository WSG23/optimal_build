/* styles/feasibility.css
   Feasibility wizard, form, assumptions, results, metrics, pack generation.
   Uses canonical --ob-spacing-*, --ob-font-size-*, --ob-radius-*, --ob-color-* variables.
*/

.feasibility-wizard {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--ob-spacing-600) var(--ob-spacing-500);
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-500);
    font-family: var(--ob-font-family-base);
    color: var(--ob-color-text-primary);
}

.feasibility-wizard__toolbar {
    display: flex;
    align-items: center;
    gap: var(--ob-spacing-200);
}

.feasibility-wizard__copy {
    padding: var(--ob-spacing-150) var(--ob-spacing-350);
    border-radius: var(--ob-radius-lg);
    border: none;
    background: var(--ob-color-brand-primary);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--ob-shadow-sm);
}

.feasibility-wizard__copy:hover:not(:disabled) {
    background: var(--ob-color-brand-primary-emphasis);
    transform: translateY(-1px);
    box-shadow: var(--ob-shadow-md);
}

.feasibility-wizard__copy:active:not(:disabled) {
    transform: translateY(0);
}

.feasibility-wizard__copy:disabled {
    background: var(--ob-color-bg-muted);
    color: var(--ob-color-text-muted);
    cursor: not-allowed;
    box-shadow: none;
}

.feasibility-wizard__copy-status {
    font-size: var(--ob-font-size-sm);
    font-weight: 500;
    animation: fadeIn 0.3s ease;
}

.feasibility-wizard__copy-status--success {
    color: var(--ob-color-success-strong);
}

.feasibility-wizard__copy-status--error {
    color: var(--ob-color-error-strong);
}

.feasibility-wizard__layout {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    gap: var(--ob-spacing-400);
}

@media (min-width: 960px) {
    .feasibility-wizard__layout {
        grid-template-columns: 360px minmax(0, 1fr);
        align-items: start;
    }
}

/* Card Base Style */
.feasibility-card {
    background: var(--ob-color-bg-surface);
    border: 1px solid var(--ob-color-border-subtle);
    border-radius: var(--ob-radius-xl);
    padding: var(--ob-spacing-500);
    box-shadow: var(--ob-shadow-md);
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.feasibility-card:hover {
    box-shadow: var(--ob-shadow-lg);
    border-color: var(--ob-color-border-default);
}

.feasibility-wizard__controls {
    /* Extending .feasibility-card behavior via duplicate properties since native CSS extend isn't improved */
    background: var(--ob-color-bg-surface);
    border: 1px solid var(--ob-color-border-subtle);
    border-radius: var(--ob-radius-xl);
    padding: var(--ob-spacing-500);
    box-shadow: var(--ob-shadow-md);
    transition: box-shadow 0.2s ease, border-color 0.2s ease;

    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-400);
}

.feasibility-form {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-300);
}

.feasibility-form__label {
    font-weight: 600;
    font-size: var(--ob-font-size-sm);
    color: var(--ob-color-text-primary);
}

.feasibility-form__field {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
}

.feasibility-form__field input {
    padding: var(--ob-spacing-200) var(--ob-spacing-300);
    border-radius: var(--ob-radius-lg);
    border: 1px solid var(--ob-color-border-subtle);
    font-size: var(--ob-font-size-base);
    background: var(--ob-color-bg-surface);
    color: var(--ob-color-text-primary);
    transition: all 0.2s ease;
}

.feasibility-form__field input:focus {
    outline: none;
    border-color: var(--ob-color-brand-primary);
    box-shadow: 0 0 0 4px var(--ob-color-brand-primary-glow);
}

.feasibility-form__error {
    margin: 0;
    font-size: var(--ob-font-size-sm);
    color: var(--ob-color-error-text);
}

.feasibility-form__actions {
    display: flex;
}

.feasibility-form__submit {
    padding: var(--ob-spacing-200) var(--ob-spacing-400);
    border-radius: var(--ob-radius-lg);
    border: none;
    background: var(--ob-color-brand-primary);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.feasibility-form__submit:hover:not(:disabled) {
    background: var(--ob-color-brand-primary-emphasis);
    transform: translateY(-1px);
}

.feasibility-form__submit:disabled {
    background: var(--ob-color-bg-muted);
    color: var(--ob-color-text-muted);
    cursor: not-allowed;
}

.feasibility-assumptions header {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
}

.feasibility-assumptions h2 {
    margin: 0;
    font-size: var(--ob-font-size-lg);
    font-weight: 600;
    color: var(--ob-color-text-primary);
}

.feasibility-assumptions__grid {
    display: grid;
    gap: var(--ob-spacing-350);
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    margin-top: var(--ob-spacing-300);
}

.feasibility-assumptions__grid label {
    font-weight: 600;
    font-size: var(--ob-font-size-sm);
    display: block;
    margin-bottom: var(--ob-spacing-100);
    color: var(--ob-color-text-primary);
}

.feasibility-assumptions__grid input {
    width: 100%;
    padding: var(--ob-spacing-150) var(--ob-spacing-200);
    border-radius: var(--ob-radius-lg);
    border: 1px solid var(--ob-color-border-subtle);
    font-size: var(--ob-font-size-sm);
    background: var(--ob-color-bg-surface);
    color: var(--ob-color-text-primary);
    transition: all 0.2s ease;
}

.feasibility-assumptions__grid input:focus {
    outline: none;
    border-color: var(--ob-color-brand-primary);
    box-shadow: 0 0 0 4px var(--ob-color-brand-primary-glow);
}

.feasibility-assumptions__hint {
    margin: var(--ob-spacing-100) 0 0;
    font-size: var(--ob-font-size-xs);
    color: var(--ob-color-text-muted);
}

.feasibility-assumptions__error {
    margin: var(--ob-spacing-100) 0 0;
    font-size: var(--ob-font-size-xs);
    color: var(--ob-color-error-text);
}

.feasibility-assumptions__reset {
    align-self: flex-start;
    margin-top: var(--ob-spacing-200);
    padding: var(--ob-spacing-100) var(--ob-spacing-200);
    border: none;
    background: transparent;
    color: var(--ob-color-brand-primary);
    font-weight: 600;
    font-size: var(--ob-font-size-sm);
    cursor: pointer;
    transition: color 0.2s ease;
}

.feasibility-assumptions__reset:hover {
    color: var(--ob-color-brand-primary-emphasis);
}

.feasibility-pack {
    margin-top: var(--ob-spacing-400);
    background: var(--ob-color-bg-surface);
    border: 1px solid var(--ob-color-border-subtle);
    border-radius: var(--ob-radius-xl);
    padding: var(--ob-spacing-500);
    box-shadow: var(--ob-shadow-md);
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-300);
}

.feasibility-pack h2 {
    margin: 0;
    font-size: var(--ob-font-size-lg);
    font-weight: 600;
    color: var(--ob-color-text-primary);
}

.feasibility-pack p {
    margin: 0;
    color: var(--ob-color-text-secondary);
    font-size: var(--ob-font-size-sm);
}

.feasibility-pack__form {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-300);
}

.feasibility-pack__field {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
}

.feasibility-pack__field span {
    font-weight: 600;
    font-size: var(--ob-font-size-sm);
    color: var(--ob-color-text-primary);
}

.feasibility-pack__field input,
.feasibility-pack__field select {
    padding: var(--ob-spacing-150) var(--ob-spacing-200);
    border-radius: var(--ob-radius-lg);
    border: 1px solid var(--ob-color-border-subtle);
    font-size: var(--ob-font-size-sm);
    background: var(--ob-color-bg-surface);
    color: var(--ob-color-text-primary);
    transition: all 0.2s ease;
}

.feasibility-pack__field input:focus,
.feasibility-pack__field select:focus {
    outline: none;
    border-color: var(--ob-color-brand-primary);
    box-shadow: 0 0 0 4px var(--ob-color-brand-primary-glow);
}

.feasibility-pack__field small {
    font-size: var(--ob-font-size-xs);
    color: var(--ob-color-text-muted);
}

.feasibility-pack__submit {
    align-self: flex-start;
    padding: var(--ob-spacing-150) var(--ob-spacing-350);
    border-radius: 9999px;
    background: var(--ob-color-action-hover);
    color: var(--ob-color-brand-primary);
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background 0.2s ease;
}

.feasibility-pack__submit:hover:not(:disabled) {
    background: var(--ob-color-brand-primary-glow);
}

.feasibility-pack__submit:disabled {
    cursor: not-allowed;
    opacity: 0.65;
}

.feasibility-pack__error {
    margin: 0;
    background: var(--ob-color-error-bg);
    border: 1px solid var(--ob-color-error-border);
    color: var(--ob-color-error-text);
    padding: var(--ob-spacing-200) var(--ob-spacing-300);
    border-radius: var(--ob-radius-lg);
    font-size: var(--ob-font-size-sm);
}

.feasibility-pack__result {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
    color: var(--ob-color-text-primary);
}

.feasibility-pack__download {
    align-self: flex-start;
    padding: var(--ob-spacing-150) var(--ob-spacing-300);
    border-radius: 9999px;
    background: var(--ob-color-success-bg);
    color: var(--ob-color-success-text);
    font-weight: 600;
    text-decoration: none;
    transition: background 0.2s ease;
}

.feasibility-pack__download:hover {
    background: var(--ob-color-success-bg-hover);
}

.feasibility-results {
    background: var(--ob-color-bg-surface);
    border: 1px solid var(--ob-color-border-subtle);
    color: var(--ob-color-text-primary);
    border-radius: var(--ob-radius-xl);
    padding: var(--ob-spacing-500);
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-400);
    min-height: 320px;
    box-shadow: var(--ob-shadow-md);
    transition: box-shadow 0.2s ease;
}

.feasibility-results:hover {
    box-shadow: var(--ob-shadow-lg);
}

.feasibility-results__placeholder,
.feasibility-results__empty,
.feasibility-results__partial {
    margin: 0;
    color: var(--ob-color-text-muted);
    font-size: var(--ob-font-size-sm);
}

.feasibility-results__error {
    margin: 0;
    background: var(--ob-color-error-bg);
    border: 1px solid var(--ob-color-error-border);
    color: var(--ob-color-error-text);
    padding: var(--ob-spacing-250) var(--ob-spacing-300);
    border-radius: var(--ob-radius-lg);
    font-size: var(--ob-font-size-sm);
}

.feasibility-results__content {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-400);
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.feasibility-results__header {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: var(--ob-spacing-350);
}

.feasibility-results__label {
    display: block;
    font-size: var(--ob-font-size-sm);
    color: var(--ob-color-text-secondary);
    margin-bottom: var(--ob-spacing-100);
}

.feasibility-results__value {
    font-size: var(--ob-font-size-2xl);
    font-weight: 700;
    color: var(--ob-color-text-primary);
    font-family: var(--ob-font-family-mono);
}

.feasibility-results__overlays {
    display: flex;
    flex-wrap: wrap;
    gap: var(--ob-spacing-100);
    margin-top: var(--ob-spacing-100);
}

.feasibility-results__badge {
    display: inline-flex;
    align-items: center;
    padding: var(--ob-spacing-100) var(--ob-spacing-200);
    border-radius: 9999px;
    background: var(--ob-color-bg-muted);
    color: var(--ob-color-text-secondary);
    font-size: var(--ob-font-size-xs);
    font-weight: 500;
}

.feasibility-metrics {
    display: grid;
    gap: var(--ob-spacing-300);
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    margin: 0;
}

.feasibility-metrics__item {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
    background: var(--ob-color-bg-muted);
    padding: var(--ob-spacing-300);
    border-radius: var(--ob-radius-lg);
    transition: transform 0.2s ease;
}

.feasibility-metrics__item:hover {
    transform: translateY(-2px);
    background: var(--ob-color-bg-subtle);
}

.feasibility-metrics__item dt {
    font-size: var(--ob-font-size-xs);
    color: var(--ob-color-text-secondary);
    font-weight: 500;
}

.feasibility-metrics__item dd {
    margin: 0;
    font-size: var(--ob-font-size-xl);
    font-weight: 600;
    color: var(--ob-color-text-primary);
    font-family: var(--ob-font-family-mono);
}

.feasibility-advisory {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-200);
    background: var(--ob-color-bg-muted);
    padding: var(--ob-spacing-350) var(--ob-spacing-400);
    border-radius: var(--ob-radius-lg);
}

.feasibility-advisory h3 {
    margin: 0;
    font-size: var(--ob-font-size-base);
    font-weight: 600;
    color: var(--ob-color-text-primary);
}

.feasibility-advisory ul {
    margin: 0;
    padding-left: var(--ob-spacing-350);
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
    color: var(--ob-color-text-secondary);
    font-size: var(--ob-font-size-sm);
}

.feasibility-advisory li {
    line-height: 1.5;
}

.feasibility-citations {
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-300);
}

.feasibility-citations h3 {
    margin: 0;
    font-size: var(--ob-font-size-base);
    font-weight: 600;
    color: var(--ob-color-text-primary);
}

.feasibility-citations ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-200);
}

.feasibility-citation {
    background: var(--ob-color-bg-muted);
    border-radius: var(--ob-radius-lg);
    padding: var(--ob-spacing-300) var(--ob-spacing-350);
    display: flex;
    flex-direction: column;
    gap: var(--ob-spacing-100);
}

.feasibility-citation__meta {
    display: flex;
    gap: var(--ob-spacing-200);
    flex-wrap: wrap;
    align-items: baseline;
}

.feasibility-citation__authority {
    font-weight: 600;
    color: var(--ob-color-text-primary);
}

.feasibility-citation__clause {
    color: var(--ob-color-text-muted);
    font-size: var(--ob-font-size-sm);
}

.feasibility-citation__parameter {
    margin: 0;
    font-size: var(--ob-font-size-sm);
    color: var(--ob-color-text-secondary);
}

.feasibility-citation__badge {
    display: inline-flex;
    align-self: flex-start;
    margin-top: var(--ob-spacing-100);
    padding: var(--ob-spacing-100) var(--ob-spacing-150);
    border-radius: var(--ob-radius-md);
    background: var(--ob-color-action-hover);
    color: var(--ob-color-brand-primary);
    font-size: var(--ob-font-size-xs);
    font-weight: 500;
}

.feasibility-results__skeleton {
    display: grid;
    gap: var(--ob-spacing-200);
}

.skeleton {
    width: 100%;
    display: block;
    border-radius: var(--ob-radius-md);
    background: linear-gradient(
        90deg,
        var(--ob-color-bg-muted) 0%,
        var(--ob-color-border-subtle) 50%,
        var(--ob-color-bg-muted) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.2s infinite;
}

.skeleton--heading {
    height: 24px;
}

.skeleton--row {
    height: 18px;
}

.skeleton--grid {
    height: 140px;
    border-radius: var(--ob-radius-lg);
}

@keyframes shimmer {
    0% {
        background-position: 200% 0;
    }
    100% {
        background-position: -200% 0;
    }
}

@keyframes pulse-retry {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }
    70% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
    }
}

.feasibility-form__submit--retry {
    background: var(--ob-color-error-base) !important;
    color: var(--ob-color-error-text-on-base) !important;
    animation: pulse-retry 2s infinite;
}
