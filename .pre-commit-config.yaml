repos:
- repo: local
  hooks:
    - id: audit-migrations
      name: audit-migrations
      entry: python3 scripts/audit_migrations.py
      language: system
      pass_filenames: false

- repo: https://github.com/psf/black
  rev: 24.8.0
  hooks:
    - id: black
      files: ^(backend/tests|tests)/

- repo: https://github.com/PyCQA/flake8
  rev: 7.1.1
  hooks:
    - id: flake8
      additional_dependencies: [flake8-bugbear==24.8.19]
      files: ^(backend/tests|tests)/

- repo: https://github.com/pre-commit/mirrors-mypy
  rev: v1.7.1
  hooks:
    - id: mypy
      name: mypy-backend
      files: ^backend/
      args: [--config-file=backend/pyproject.toml]
      additional_dependencies:
        - fastapi==0.104.1
        - uvicorn[standard]==0.24.0
        - pydantic[email]==2.5.0
        - sqlalchemy[asyncio]==2.0.23
        - asyncpg==0.29.0
        - alembic==1.13.0
        - python-multipart==0.0.6
        - python-jose[cryptography]==3.3.0
        - passlib[bcrypt]==1.7.4
        - httpx==0.25.2
        - python-dateutil==2.8.2
        - prefect==2.14.10
        - structlog==23.2.0
        - prometheus-client==0.19.0
