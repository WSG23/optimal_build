# Declare per-rule exceptions for the coding rules checker.
# See CODING_RULES.md for guidance before adding entries.
exceptions:
  rule_1_migrations:
    # Pre-existing migrations with known issues - do not modify these
    - backend/migrations/versions/0773c87952ef_add_singapore_properties_table_with_mvp_.py
    - backend/migrations/versions/20241228_000006_add_commercial_property_agent_tables.py
    # Agent advisory feedback - uses if_exists=True guards in downgrade
    - backend/migrations/versions/20250220_000009_add_agent_advisory_feedback.py
    # Listing integration - uses if_exists=True guards in downgrade
    - backend/migrations/versions/20250220_000010_add_listing_integration_tables.py
    # Business performance tables - uses if_exists=True guards in downgrade
    - backend/migrations/versions/20250220_000011_add_business_performance_tables.py
    # Commission/performance/developer tables added in Phase 2A (uses if_exists guards)
    - backend/migrations/versions/20250220_000012_add_commission_tables.py
    - backend/migrations/versions/20250220_000013_add_performance_snapshots.py
    - backend/migrations/versions/20251013_000014_add_developer_due_diligence_checklists.py
    - backend/migrations/versions/20251013_000015_add_developer_condition_assessments.py
    # Regstack migrations - different schema
    - db/versions/20250216000000_init_regstack.py
    - db/versions/20250217000100_add_provenance_checksum.py
  rule_2_async:
    # Legacy files with sync Session - to be migrated later
    - backend/app/api/v1/users_db.py
    - backend/app/api/v1/singapore_property_api.py
    - backend/app/api/v1/projects_api.py
  rule_4_dependency_pinning:
    # Dependencies inherited from infrastructure spike; pinning blocked pending Phase 2 dependency audit
    - backend/requirements.txt
  rule_5_singapore:
    # Test failures due to DB setup issues, not compliance violations
    - backend/app/models/singapore_property.py
  rule_7_code_quality:
    # isort and ruff disagree on backend._compat import ordering
    - backend/app/api/v1/advanced_intelligence.py
    - backend/app/api/v1/agents.py
    # Long URL in documentation string
    - scripts/smoke_test_pdfs.py
